(this.webpackJsonpnote=this.webpackJsonpnote||[]).push([[0],{227:function(e,t,a){e.exports=a.p+"static/media/logo.14b60547.png"},238:function(e,t,a){e.exports=a(529)},302:function(e,t,a){},432:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){},528:function(e,t,a){},529:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a(83),i=a(55),s=(a(87),a(53)),l=a.n(s),u=(a(51),a(37)),d=a.n(u),h=(a(68),a(18)),m=a.n(h),p=(a(128),a(30)),f=a.n(p),g=(a(93),a(24)),k=a.n(g),v=(a(129),a(72)),y=a.n(v),b=(a(78),a(43)),E=a.n(b),C=a(11),S=a.n(C),w=a(19),x=a(54),O=a(20),j=a(21),I=a(23),D=a(22),B=a(227),T=a.n(B);a(302);var N=function(){return r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:T.a,alt:"logo",className:"logo-img"}))},R=a(85),M=a.n(R);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";if("GET"===a){var n="";return Object.keys(t).forEach((function(e){t[e]&&(n+=e+"="+t[e]+"&")})),n&&(n=n.substring(0,n.length-1)),M.a.get(e+"?"+n)}return M.a.post(e,t)}M.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&"/login"!==e.url&&"/register"!==e.url&&(e.headers.common.Authorization="Bearer "+t),e})),M.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&(window.location.href="/login"),Promise.reject(e)}));var A,F=function(e){return L("/user/getcode",{mail:e})},U=function(e){return L("/user/register",{mail:e.mail,password:e.password,code:e.code},"POST")},H=function(e){return L("/user/reset",{mail:e.mail,password:e.password,code:e.code},"POST")},z=function(e){return L("/user/login",{mail:e.mail,password:e.password},"POST")},K=function(e){return L("/note",{_id:e._id,pageIndex:e.pageIndex,pageSize:e.pageSize,category:e.category,keyword:e.keyword})},_=function(e){return L("/note/movecategory",{itemCheckedIds:e.itemCheckedIds,category:e.category},"POST")},P=function(e){return/^([a-zA-Z]|[0-9])(\w|-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)},G=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),c=t.getMinutes();return o<10&&(o="0"+o),c<10&&(c="0"+c),a+"\u5e74"+n+"\u6708"+r+"\u65e5 "+o+":"+c},q=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={mail:"",password:"",msg:""},e.handleChange=function(t,a){e.setState(Object(x.a)({},t,a))},e.login=Object(w.a)(S.a.mark((function t(){var a,n,r,o,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.mail,r=a.password,n&&r){t.next=3;break}return t.abrupt("return",e.setState({msg:"\u8bf7\u586b\u5199\u76f8\u5e94\u7684\u6570\u636e"}));case 3:if(P(n)){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 5:return t.next=7,z({mail:n,password:r});case 7:o=t.sent,0===(c=o.data).err?(localStorage.setItem("token",c.data),e.props.history.replace("/")):e.setState({msg:c.msg});case 10:case"end":return t.stop()}}),t)}))),e.toRegister=function(){e.props.history.replace("/register")},e.resetPassword=function(){e.props.history.replace("/reset")},e.handleNotiveBarClick=function(){e.setState({msg:""})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state.msg;return r.a.createElement("div",null,r.a.createElement(E.a,null,"\u4fbf\xa0\xa0\u7b7e"),r.a.createElement(N,null),r.a.createElement(l.a,null,r.a.createElement(d.a,null,t?r.a.createElement(y.a,{mode:"closable",onClick:this.handleNotiveBarClick},t):null,r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",onChange:function(t){return e.handleChange("mail",t.trim())}},"\u90ae\u7bb1:"),r.a.createElement(f.a,null),r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password",onChange:function(t){return e.handleChange("password",t.trim())}},"\u5bc6\u7801:"),r.a.createElement(f.a,null),r.a.createElement(m.a,{type:"primary",onClick:this.login},"\u767b\xa0\xa0\xa0\u9646"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(m.a,{onClick:this.toRegister,style:{flex:1,borderRadius:0}},"\u672a\u6709\u5e10\u53f7?"),r.a.createElement(m.a,{onClick:this.resetPassword,style:{flex:1,borderRadius:0}},"\u5fd8\u8bb0\u5bc6\u7801\uff1f")))))}}]),a}(n.Component),J=(a(94),a(47)),W=a.n(J),V=W.a.Item,Z=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={mail:"",password:"",repassword:"",code:"",msg:"",isDisable:!1,codeButtonText:"\u53d1\u9001\u9a8c\u8bc1\u7801"},e.timerId=null,e.handleChange=function(t,a){e.setState(Object(x.a)({},t,a))},e.register=Object(w.a)(S.a.mark((function t(){var a,n,r,o,c,i,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.mail,r=a.password,o=a.repassword,c=a.code,n&&r&&o&&c){t.next=3;break}return t.abrupt("return",e.setState({msg:"\u8bf7\u586b\u5199\u76f8\u5e94\u6570\u636e"}));case 3:if(P(n)){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 5:if(!(r.length<6)){t.next=7;break}return t.abrupt("return",e.setState({msg:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e6\u4f4d"}));case 7:if(r===o){t.next=9;break}return t.abrupt("return",e.setState({msg:"\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"}));case 9:return t.next=11,U({mail:n,password:r,code:c});case 11:i=t.sent,0===(s=i.data).err?(clearInterval(e.timerId),e.props.history.replace("/login")):e.setState({msg:s.msg});case 14:case"end":return t.stop()}}),t)}))),e.toLogin=function(){e.props.history.replace("/login")},e.getCode=Object(w.a)(S.a.mark((function t(){var a,n,r,o,c,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.mail){t.next=3;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"}));case 3:if(P(a)){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 5:return n=60,e.setState({isDisable:!0,codeButtonText:"\u91cd\u65b0\u53d1\u9001(".concat(n,")")}),e.timerId=setInterval((function(){n--,e.setState({codeButtonText:"\u91cd\u65b0\u53d1\u9001(".concat(n,")")}),n<=0&&(clearInterval(e.timerId),e.setState({isDisable:!1}),e.setState({codeButtonText:"\u53d1\u9001\u9a8c\u8bc1\u7801"}))}),1e3),t.next=10,F(a);case 10:if(r=t.sent,o=r.data,c=o.err,i=o.msg,1!==c){t.next=16;break}return t.abrupt("return",e.setState({msg:i}));case 16:case"end":return t.stop()}}),t)}))),e.handleNotiveBarClick=function(){e.setState({msg:""})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.msg,n=t.isDisable,o=t.codeButtonText;return r.a.createElement("div",null,r.a.createElement(E.a,null,"\u4fbf\xa0\xa0\u7b7e"),r.a.createElement(N,null),r.a.createElement(l.a,null,r.a.createElement(d.a,null,a?r.a.createElement(y.a,{mode:"closable",onClick:this.handleNotiveBarClick},a):null,r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",onChange:function(t){e.handleChange("mail",t.trim())}},"\u90ae\u7bb1:"),r.a.createElement(f.a,null),r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password",onChange:function(t){e.handleChange("password",t.trim())}},"\u5bc6\u7801:"),r.a.createElement(f.a,null),r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801",type:"password",onChange:function(t){return e.handleChange("repassword",t.trim())}},"\u786e\u8ba4\u5bc6\u7801:"),r.a.createElement(f.a,null),r.a.createElement(W.a,null,r.a.createElement(V,{style:{flex:2}},r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:function(t){return e.handleChange("code",t.trim())}},"\u9a8c\u8bc1\u7801:")),r.a.createElement(V,null,r.a.createElement(m.a,{onClick:this.getCode,disabled:n,style:{backgroundColor:"#057d9f",color:"#fff"},activeStyle:{backgroundColor:"#06627d"}},o))),r.a.createElement(f.a,null),r.a.createElement(m.a,{type:"primary",onClick:this.register},"\u6ce8\xa0\xa0\xa0\u518c"),r.a.createElement(m.a,{onClick:this.toLogin},"\u5df2\u6709\u5e10\u6237"))))}}]),a}(n.Component),X=(a(69),a(38)),Y=a.n(X),$=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={user:""},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(!localStorage.getItem("token"))return this.props.history.replace("/login");L("/user/getuser").then((function(t){e.setState({user:t.data})})).catch((function(t){e.props.history.replace("/login")}))}},{key:"render",value:function(){return this.state.user?r.a.createElement(r.a.Fragment,null,this.props.children):r.a.createElement("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Y.a,{type:"loading",size:"lg"}))}}]),a}(n.Component),Q=Object(i.f)($),ee=(a(324),a(229)),te=a.n(ee),ae=(a(326),a(230)),ne=a.n(ae),re=(a(177),a(147)),oe=a.n(re),ce=(a(347),a(86)),ie=a.n(ce),se=(a(352),a(151)),le=a.n(se),ue=(a(355),a(233)),de=a.n(ue),he=(a(182),a(35)),me=a.n(he),pe=a(152),fe=(a(361),a(153)),ge=a.n(fe),ke=a(237),ve=(a(432),ge.a.alert),ye=ge.a.prompt;new RegExp("\\biPhone\\b|\\biPod\\b","i").test(window.navigator.userAgent)&&(A={onTouchStart:function(e){return e.preventDefault()}});var be=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;Object(O.a)(this,a),(n=t.call(this,e)).genData=Object(w.a)(S.a.mark((function e(){var t,a,r,o,c,i,s,l,u,d,h,m,p,f=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]&&f[0],a=f.length>1&&void 0!==f[1]?f[1]:"",r=f.length>2&&void 0!==f[2]?f[2]:"",o=n.state,c=o.pageIndex,i=o.dataArr,s=o.data,l=o.dataSource,u=o.pageSize,t&&(c=0,s=[],i=[]),"\u5168\u90e8\u5206\u7c7b"===a&&(a=""),e.next=8,K({pageSize:u,pageIndex:c,category:a,keyword:r});case 8:if(0===(d=e.sent).data.err){for(h=d.data.data.notes,(m=h.length)<=0&&n.setState({hasMore:!1}),p=0;p<m;p++)i.push("row - ".concat(c*m+p)),s.push(h[p]);t?(n.setState({dataArr:i,data:h,dataSource:l.cloneWithRows(i),pageIndex:c+1,isLoading:!1}),m<u&&n.setState({hasMore:!1})):(n.rData=Object(pe.a)({},n.rData,{},i),n.setState({data:s,dataArr:i,dataSource:l.cloneWithRows(n.rData),pageIndex:c+1,isLoading:!1}),m<u&&n.setState({hasMore:!1}))}case 10:case"end":return e.stop()}}),e)}))),n.onEndReached=Object(w.a)(S.a.mark((function e(){var t,a,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.isLoading,r=t.hasMore,o=t.selectedFolder,!a||r){e.next=3;break}return e.abrupt("return");case 3:n.setState({isLoading:!0}),n.genData(!1,o);case 5:case"end":return e.stop()}}),e)}))),n.handleSearch=function(e){var t=e.trim();n.genData(!0,n.state.selectedFolder,t)},n.handleCancel=function(){var e=n.state.selectedFolder;n.setState({showCancelBtn:!1},(function(){n.genData(!0,e)})),n.props.form.setFieldsValue({keyword:""})},n.handleManage=function(){n.setState((function(e){return{isManage:!e.isManage,showCancelBtn:!1}}))},n.handleCheckbox=function(e,t){var a=e.target.checked,r=n.state.data;r=r.map((function(e){return e._id===t?Object(pe.a)({},e,{checked:a}):e})),n.setState({data:r})},n.handleDelete=function(e){var t=n.state,a=t.data,r=t.dataArr,o=t.dataSource,c=a.filter((function(e){return e.checked})).map((function(e){return e._id}));ve("\u5220\u9664\u4fbf\u7b7e","\u786e\u5b9a\u5220\u9664".concat(e,"\u6761\u4fbf\u7b7e\u5417?"),[{text:"Cancel"},{text:"Ok",onPress:function(){var e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/note/delete",{itemCheckedIds:{itemCheckedIds:c}.itemCheckedIds},"POST");case 2:0===(t=e.sent).data.err?(a=a.filter((function(e){return!e.checked})),r=r.slice(0,a.length),n.setState({data:a,dataArr:r,dataSource:o.cloneWithRows(r)},(function(){0===a.length&&n.setState({isManage:!1})})),me.a.success(t.data.msg,1)):me.a.fail(t.data.msg,1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}])},n.handleAllChecked=function(){var e=n.state,t=e.data,a=e.allChecked;(a=!a)?t.forEach((function(e){return e.checked=!0})):t.forEach((function(e){return e.checked=!1})),n.setState({data:t,allChecked:a})},n.onChange=function(e){var t=n.state.cateData,a="";n.props.form.setFieldsValue({keyword:""});for(var r=0;r<t.length;r++)if(t[r].value===e[0]){a=t[r].label,n.genData(!0,a),n.setState({show:!1,selectedFolder:a,showCancelBtn:!1});break}},n.onMaskClick=function(){document.body.style.overflow="auto",n.setState({show:!1})},n.handleClick=function(e){e.preventDefault(),n.setState({show:!n.state.show})},n.createFolder=function(e){var t=n.state.cateData,a="";ye("\u65b0\u5efa\u6587\u4ef6\u5939","",(function(r){(a=r.trim())?t.some((function(e){return e.label===a}))?(me.a.info("\u8be5\u540d\u79f0\u5df2\u5b58\u5728",1),n.createFolder()):(t.splice(1,0,{value:a,label:a}),e&&e(a),n.setState({cateData:t})):(me.a.info("\u4e0d\u80fd\u4e3a\u7a7a",1),n.createFolder())}),"",null,["\u8bf7\u8f93\u5165\u540d\u79f0"])},n.logout=function(){localStorage.removeItem("token"),n.props.history.replace("/login")},n.showActionSheet=function(){var e=n.state,t=e.cateData,a=e.data,r=e.selectedFolder,o=["\u65b0\u5efa\u6587\u4ef6\u5939"];t.forEach((function(e){"\u5168\u90e8\u5206\u7c7b"!==e.label&&"\u672a\u5206\u7c7b"!==e.label&&o.push(e.label)})),de.a.showActionSheetWithOptions({options:o,title:"\u9009\u62e9\u6587\u4ef6\u5939",maskClosable:!0,"data-seed":"logId",wrapProps:A},function(){var e=Object(w.a)(S.a.mark((function e(t){var c,i,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="",0!==t){e.next=5;break}n.createFolder(function(){var e=Object(w.a)(S.a.mark((function e(t){var o,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,o=a.filter((function(e){return e.checked})).map((function(e){return e._id})),e.next=4,_({itemCheckedIds:o,category:c});case 4:0===(i=e.sent).data.err&&(n.genData(!0,r),me.a.info(i.data.msg,1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11;break;case 5:return c=o[t],i=a.filter((function(e){return e.checked})).map((function(e){return e._id})),e.next=9,_({itemCheckedIds:i,category:c});case 9:0===(s=e.sent).data.err&&(n.genData(!0,r),me.a.info(s.data.msg,1));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};var r=new le.a.DataSource({rowHasChanged:function(e,t){return!0}});return n.state={dataSource:r,isLoading:!0,hasMore:!0,pageIndex:0,data:[],dataArr:[],pageSize:10,showCancelBtn:!1,isManage:!1,allChecked:!1,show:!1,cateData:[],selectedFolder:""},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark((function e(){var t,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.category||"\u5168\u90e8\u5206\u7c7b",this.genData(!0,t),e.next=4,L("/note/getcategory");case 4:a=e.sent,n=[{value:"\u5168\u90e8\u5206\u7c7b",label:"\u5168\u90e8\u5206\u7c7b"}],0===a.data.err&&a.data.data.length>1&&a.data.data.map((function(e){return n.push({value:e._id,label:e._id})})),this.setState({cateData:n,selectedFolder:t});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isManage,o=t.allChecked,c=t.show,i=t.cateData,s=t.selectedFolder,u=this.props.form.getFieldProps,d=a.filter((function(e){return e.checked})).length,h=0,p=r.a.createElement("div",{className:"single-foo-menu"},r.a.createElement(ne.a,{data:i,value:[s],level:1,onChange:this.onChange,height:.6*document.documentElement.clientHeight}),r.a.createElement(m.a,{onClick:function(){return e.createFolder()}},"\u65b0\u5efa\u6587\u4ef6\u5939")),f=r.a.createElement("div",{style:{position:"absolute",width:"100%",height:.6*document.documentElement.clientHeight,display:"flex",justifyContent:"center"}},r.a.createElement(te.a,{size:"large"}));return r.a.createElement("div",{className:"note-list"},r.a.createElement(E.a,{mode:"light",leftContent:n?r.a.createElement(Y.a,{type:"cross",size:"lg"}):r.a.createElement("span",{className:"iconfont icon-PC_tuichudenglu"}),onLeftClick:function(){return n?e.setState({isManage:!1,allChecked:!0},e.handleAllChecked):e.logout()},rightContent:n?r.a.createElement("span",{key:"2",onClick:this.handleAllChecked,className:"iconfont icon-piliangguanli ".concat(o?"active":"")}):r.a.createElement("span",{key:"1",className:"manage",onClick:this.handleManage},"\u7ba1\u7406")},n?0===d?"\u8bf7\u9009\u62e9\u9879\u76ee":"\u5df2\u9009\u62e9".concat(d,"\u9879"):r.a.createElement("div",{onClick:this.handleClick,className:"category-selector"},r.a.createElement("span",null,"\u5168\u90e8\u5206\u7c7b"===s?"\u4fbf\u7b7e":s),r.a.createElement(Y.a,{size:"xxs",type:c?"up":"down"}))),c?i.length>0?p:f:null,c?r.a.createElement("div",{className:"menu-mask",onClick:this.onMaskClick}):null,r.a.createElement(l.a,null,r.a.createElement(le.a,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,renderHeader:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,Object.assign({placeholder:"\u641c\u7d22\u4fbf\u7b7e",disabled:n},u("keyword",{initialValue:"",onChange:function(t){return e.handleSearch(t)}}),{onFocus:function(){e.setState({showCancelBtn:!0})},clear:!0}),r.a.createElement(Y.a,{type:"search",color:"#777"})),r.a.createElement("div",{className:"cancel",style:{display:e.state.showCancelBtn?"flex":"none"}},r.a.createElement("span",{onClick:e.handleCancel},"\u53d6\u6d88")))},renderFooter:function(){return r.a.createElement("div",{style:{padding:30,textAlign:"center"}},e.state.isLoading&&e.state.hasMore?"Loading...":"Loaded")},renderRow:function(t,o,c){var i=a[h++];if(!i)return r.a.createElement(r.a.Fragment,null);for(var l=JSON.parse(i.rawContentState).blocks,u="",d="",m=0;m<l.length;m++){var p=l[m].text.trim();if(p){u=p,m<l.length-1&&(d=l[m+1].text.trim());break}}return r.a.createElement(ie.a,{key:i._id},r.a.createElement("div",{onClick:function(){return t=i._id,a=i.updateTime,void e.props.history.push({pathname:"/editor/".concat(s,"/").concat(t),state:a});var t,a}},r.a.createElement(ie.a.Header,{title:u}),r.a.createElement(ie.a.Body,null,r.a.createElement("div",null,d)),r.a.createElement(ie.a.Footer,{content:G(i.updateTime)})),r.a.createElement(oe.a,{style:{display:n?"block":"none"},checked:!!i.checked,onChange:function(t){return e.handleCheckbox(t,i._id)}}))},renderSeparator:function(e,t){if(0!==a.length)return r.a.createElement("div",{key:"".concat(e,"-").concat(t),style:{backgroundColor:"#f7f7f7",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}})},className:"am-list",pageSize:this.state.pageSize,useBodyScroll:!0,scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10})),n?d>0?r.a.createElement("div",{className:"manage-tool"},r.a.createElement("div",{onClick:function(){return e.handleDelete(d)}},r.a.createElement("span",{className:"iconfont icon-shanchu"}),r.a.createElement("span",null,"\u5220\u9664")),r.a.createElement("div",{onClick:this.showActionSheet},r.a.createElement("span",{className:"iconfont icon-export"}),r.a.createElement("span",null,"\u79fb\u52a8\u5230"))):null:r.a.createElement("span",{onClick:function(){return e.props.history.push({pathname:"/editor/".concat(s,"/add"),state:Date.now()})},className:"add-icon iconfont icon-weimingming"}))}}]),a}(r.a.Component),Ee=Object(ke.a)()(be),Ce=a(12),Se=[{value:"Bold",style:"BOLD",icon:"icon-bold"},{value:"Italic",style:"ITALIC",icon:"icon-icon_italic"},{value:"Underline",style:"UNDERLINE",icon:"icon-under-line"},{value:"Strikethrough",style:"STRIKETHROUGH",icon:"icon-strike-through"},{value:"Code",style:"CODE",icon:"icon-code"},{value:"Highlight",style:"HIGHLIGHT",icon:"icon-highlight"}],we=[{value:"Heading One",block:"header-one",icon:"icon-h2"},{value:"Heading Two",block:"header-two",icon:"icon-h4"},{value:"Blockquote",block:"blockquote",icon:"icon-blockquote"},{value:"Unordered List",block:"unordered-list-item",icon:"icon-e-unorder-list"},{value:"Ordered List",block:"ordered-list-item",icon:"icon-e-order-list"}];a(526);var xe=function(e){var t=e.editorState,a=e.updateEditorState,n=function(e){e.preventDefault();var n=e.currentTarget.getAttribute("data-style");a(Ce.RichUtils.toggleInlineStyle(t,n))},o=function(e){e.preventDefault();var n=e.currentTarget.getAttribute("data-block");a(Ce.RichUtils.toggleBlockType(t,n))};return r.a.createElement("div",{className:"toolbar"},Se.map((function(e){return function(e,a,o){var c="";return t.getCurrentInlineStyle().has(a)&&(c="active"),r.a.createElement("div",{key:a,className:"icon-container ".concat(c),"data-style":a,onMouseDown:n},o?r.a.createElement("i",{className:"iconfont ".concat(o)}):e)}(e.value,e.style,e.icon)})),we.map((function(e){return function(e,a,n){var c="";return Ce.RichUtils.getCurrentBlockType(t)===a&&(c="active"),r.a.createElement("span",{key:a,className:"icon-container ".concat(c),"data-block":a,onMouseDown:o},n?r.a.createElement("i",{className:"iconfont ".concat(n)}):e)}(e.value,e.block,e.icon)})))};a(527);function Oe(e){return!Ce.KeyBindingUtil.hasCommandModifier(e)||"x"!==e.key&&"X"!==e.key?!Ce.KeyBindingUtil.hasCommandModifier(e)||"h"!==e.key&&"H"!==e.key?Ce.KeyBindingUtil.hasCommandModifier(e)&&"["===e.key?"header-one":Ce.KeyBindingUtil.hasCommandModifier(e)&&"]"===e.key?"header-two":Ce.KeyBindingUtil.hasCommandModifier(e)&&"7"===e.key?"blockquote":Ce.KeyBindingUtil.hasCommandModifier(e)&&"8"===e.key?"unordered-list":Ce.KeyBindingUtil.hasCommandModifier(e)&&"9"===e.key?"ordered-list":Object(Ce.getDefaultKeyBinding)(e):"highlight":"strikethrough"}var je=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState({editorState:e})},n.save=Object(w.a)(S.a.mark((function e(){var t,a,r,o,c,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.editorState,r=t.resNoteId,o=n.props.match.params.id,c=n.props.match.params.category,i=a.getCurrentContent(),s=Object(Ce.convertToRaw)(i),!s.blocks.every((function(e){return""===e.text.trim()}))){e.next=8;break}return e.abrupt("return",me.a.info("empty !!!",1));case 8:if("add"!==o){e.next=21;break}if("\u5168\u90e8\u5206\u7c7b"===c&&(c="\u672a\u5206\u7c7b"),r){e.next=20;break}return e.next=13,L("/note/add",{rawContentState:(d={rawContentState:JSON.stringify(s),category:c}).rawContentState,category:d.category},"POST");case 13:if(0!==(l=e.sent).data.err){e.next=17;break}return n.setState({resNoteId:l.data.data}),e.abrupt("return",me.a.success("\u6dfb\u52a0\u6210\u529f",1,(function(){}),!1));case 17:return e.abrupt("return");case 20:o=r;case 21:return e.next=23,L("/note/update",{_id:(u={_id:o,rawContentState:JSON.stringify(s)})._id,rawContentState:u.rawContentState},"POST");case 23:if(0!==e.sent.data.err){e.next=26;break}return e.abrupt("return",me.a.success("\u66f4\u65b0\u6210\u529f",1));case 26:me.a.fail("\u4fdd\u5b58\u5931\u8d25",1);case 27:case"end":return e.stop()}var u,d}),e)}))),n.updateEditorState=function(e){return n.setState({editorState:e})},n.handleKeyCommand=function(e){var t=Ce.RichUtils.handleKeyCommand(n.state.editorState,e);return t||"strikethrough"!==e||(t=Ce.RichUtils.toggleInlineStyle(n.state.editorState,"STRIKETHROUGH")),t||"header-one"!==e||(t=Ce.RichUtils.toggleBlockType(n.state.editorState,"header-one")),t||"header-two"!==e||(t=Ce.RichUtils.toggleBlockType(n.state.editorState,"header-two")),t||"blockquote"!==e||(t=Ce.RichUtils.toggleBlockType(n.state.editorState,"blockquote")),t||"ordered-list"!==e||(t=Ce.RichUtils.toggleBlockType(n.state.editorState,"ordered-list-item")),t||"unordered-list"!==e||(t=Ce.RichUtils.toggleBlockType(n.state.editorState,"unordered-list-item")),t||"highlight"!==e||(t=Ce.RichUtils.toggleInlineStyle(n.state.editorState,"HIGHLIGHT")),t?(n.setState({editorState:t}),"handled"):"not-handled"},n.undo=function(){n.setState({editorState:Ce.EditorState.undo(n.state.editorState)})},n.redo=function(){n.setState({editorState:Ce.EditorState.redo(n.state.editorState)})},n.focus=function(){if("true"!==document.activeElement.contentEditable){var e=function(e){var t=e.getCurrentContent().getBlockMap(),a=t.last().getKey(),n=t.last().getLength(),r=new Ce.SelectionState({anchorKey:a,anchorOffset:n,focusKey:a,focusOffset:n});return Ce.EditorState.acceptSelection(e,r)}(n.state.editorState);n.setState({editorState:e},(function(){n.domEditor.focus()}))}},n.setDomEditorRef=function(e){return n.domEditor=e},n.state={editorState:Ce.EditorState.createEmpty(),updateTime:n.props.location.state,isLoading:!0,resNoteId:""},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(S.a.mark((function e(){var t,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==(t=this.props.match.params.id)){e.next=3;break}return e.abrupt("return",this.setState({isLoading:!1}));case 3:return e.next=5,K({_id:t});case 5:0===(a=e.sent).data.err?(n=JSON.parse(a.data.data),this.setState({editorState:Ce.EditorState.createWithContent(Object(Ce.convertFromRaw)(n)),isLoading:!1})):this.props.history.replace("/404");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.editorState,n=t.updateTime,o=t.isLoading,c=a.getCurrentContent(),i=!1;c.hasText()||"unstyled"===c.getBlockMap().first().getType()&&(i=!0);var s="",l="";if(0===a.getUndoStack().size&&(s="grey"),0===a.getRedoStack().size&&(l="grey"),o)return r.a.createElement("div",{style:{textAlign:"center",marginTop:100,color:"#777"}},"Loading...");var u=n;return r.a.createElement("div",{className:"editor-wrapper ".concat(i?"":"hide-placeholder")},r.a.createElement("div",{className:"editor-header"},r.a.createElement(E.a,{mode:"light",icon:r.a.createElement(Y.a,{type:"left"}),onLeftClick:function(){e.props.history.push({pathname:"/",category:e.props.match.params.category})},rightContent:[r.a.createElement("span",{key:"0",className:"iconfont icon-chehui ".concat(s),onClick:this.undo,style:{marginRight:15}}),r.a.createElement("span",{key:"1",className:"iconfont icon-qianjin ".concat(l),onClick:this.redo,style:{marginRight:15}}),r.a.createElement("span",{key:"2",className:"iconfont icon-dui",onClick:this.save})]},r.a.createElement("span",{className:"edit-time"},G(u))),r.a.createElement(xe,{editorState:a,updateEditorState:this.updateEditorState})),r.a.createElement("div",{className:"editor-container",onClick:this.focus},r.a.createElement(Ce.Editor,{customStyleMap:{HIGHLIGHT:{backgroundColor:"#faed27"}},editorState:a,onChange:function(t){return e.onChange(t)},placeholder:"write your note in ...",handleKeyCommand:this.handleKeyCommand,keyBindingFn:Oe,ref:this.setDomEditorRef})))}}]),a}(n.Component),Ie=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(W.a,{justify:"center",align:"center",direction:"column",style:{height:"100vh"}},r.a.createElement("div",{style:{fontSize:100,fontWeight:30,color:"red",fontFamily:"cursive"}},"404"),r.a.createElement(m.a,{type:"ghost",inline:!0,onClick:function(){return e.props.history.replace("/")}},"\u8fd4\u56de\u9996\u9875"))}}]),a}(n.Component),De=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:""},e}return Object(j.a)(a,[{key:"render",value:function(){return r.a.createElement(Q,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/editor/:category/:id",exact:!0,component:je}),r.a.createElement(i.a,{path:"/",exact:!0,component:Ee}),r.a.createElement(i.a,{path:"*",exact:!0,component:Ie})))}}]),a}(n.Component),Be=W.a.Item,Te=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={mail:"",password:"",repassword:"",code:"",msg:"",isDisable:!1,codeButtonText:"\u53d1\u9001\u9a8c\u8bc1\u7801"},e.timerId=null,e.handleChange=function(t,a){e.setState(Object(x.a)({},t,a))},e.reset=Object(w.a)(S.a.mark((function t(){var a,n,r,o,c,i,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.mail,r=a.password,o=a.repassword,c=a.code,n&&r&&o&&c){t.next=3;break}return t.abrupt("return",e.setState({msg:"\u8bf7\u586b\u5199\u76f8\u5e94\u6570\u636e"}));case 3:if(P(n)){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 5:if(!(r.length<6)){t.next=7;break}return t.abrupt("return",e.setState({msg:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e6\u4f4d"}));case 7:if(r===o){t.next=9;break}return t.abrupt("return",e.setState({msg:"\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"}));case 9:return t.next=11,H({mail:n,password:r,code:c});case 11:i=t.sent,0===(s=i.data).err?(clearInterval(e.timerId),e.props.history.replace("/login")):e.setState({msg:s.msg});case 14:case"end":return t.stop()}}),t)}))),e.toLogin=function(){e.props.history.replace("/login")},e.toRegister=function(){e.props.history.replace("/register")},e.getCode=Object(w.a)(S.a.mark((function t(){var a,n,r,o,c,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.mail){t.next=3;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"}));case 3:if(P(a)){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 5:return n=60,e.setState({isDisable:!0,codeButtonText:"\u91cd\u65b0\u53d1\u9001(".concat(n,")")}),e.timerId=setInterval((function(){n--,e.setState({codeButtonText:"\u91cd\u65b0\u53d1\u9001(".concat(n,")")}),n<=0&&(clearInterval(e.timerId),e.setState({isDisable:!1}),e.setState({codeButtonText:"\u53d1\u9001\u9a8c\u8bc1\u7801"}))}),1e3),t.next=10,F(a);case 10:if(r=t.sent,o=r.data,c=o.err,i=o.msg,1!==c){t.next=16;break}return t.abrupt("return",e.setState({msg:i}));case 16:case"end":return t.stop()}}),t)}))),e.handleNotiveBarClick=function(){e.setState({msg:""})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.msg,n=t.isDisable,o=t.codeButtonText;return r.a.createElement("div",null,r.a.createElement(E.a,null,"\u4fbf\xa0\xa0\u7b7e"),r.a.createElement(N,null),r.a.createElement(l.a,null,r.a.createElement(d.a,null,a?r.a.createElement(y.a,{mode:"closable",onClick:this.handleNotiveBarClick},a):null,r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740",onChange:function(t){e.handleChange("mail",t.trim())}},"\u90ae\u7bb1:"),r.a.createElement(f.a,null),r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password",onChange:function(t){e.handleChange("password",t.trim())}},"\u5bc6\u7801:"),r.a.createElement(f.a,null),r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801",type:"password",onChange:function(t){return e.handleChange("repassword",t.trim())}},"\u786e\u8ba4\u5bc6\u7801:"),r.a.createElement(f.a,null),r.a.createElement(W.a,null,r.a.createElement(Be,{style:{flex:2}},r.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChange:function(t){return e.handleChange("code",t.trim())}},"\u9a8c\u8bc1\u7801:")),r.a.createElement(Be,null,r.a.createElement(m.a,{onClick:this.getCode,disabled:n,style:{backgroundColor:"#057d9f",color:"#fff"},activeStyle:{backgroundColor:"#06627d"}},o))),r.a.createElement(f.a,null),r.a.createElement(m.a,{type:"primary",onClick:this.reset},"\u91cd\u7f6e\u5bc6\u7801"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(m.a,{onClick:this.toRegister,style:{flex:1,borderRadius:0}},"\u524d\u5f80\u6ce8\u518c"),r.a.createElement(m.a,{onClick:this.toLogin,style:{flex:1,borderRadius:0}},"\u524d\u5f80\u767b\u5f55")))))}}]),a}(n.Component);a(528);Object(o.render)(r.a.createElement(c.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/login",exact:!0,component:q}),r.a.createElement(i.a,{path:"/register",exact:!0,component:Z}),r.a.createElement(i.a,{path:"/reset",exact:!0,component:Te}),r.a.createElement(i.a,{component:De}))),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.d0fa9777.chunk.js.map