(this.webpackJsonpnote=this.webpackJsonpnote||[]).push([[13],{53:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"k",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"h",(function(){return p}));var r=n(86),a=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";if("GET"===n){var r="";return Object.keys(t).forEach((function(e){t[e]&&(r+=e+"="+t[e]+"&")})),r&&(r=r.substring(0,r.length-1)),a.a.get(e+"?"+r)}return a.a.post(e,t)}a.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&"/login"!==e.url&&"/register"!==e.url&&(e.headers.common.Authorization="Bearer "+t),e})),a.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&(window.location.href="/login"),Promise.reject(e)}));var i=function(e){return o("/user/getcode",{mail:e})},c=function(e){return o("/user/register",{mail:e.mail,password:e.password,code:e.code},"POST")},s=function(e){return o("/user/reset",{mail:e.mail,password:e.password,code:e.code},"POST")},d=function(e){return o("/user/login",{mail:e.mail,password:e.password},"POST")},u=function(){return o("/user/getuser")},l=function(e){return o("/note/add",{rawContentState:e.rawContentState,category:e.category},"POST")},f=function(e){return o("/note/update",{_id:e._id,rawContentState:e.rawContentState},"POST")},h=function(e){return o("/note",{_id:e._id,pageIndex:e.pageIndex,pageSize:e.pageSize,category:e.category,keyword:e.keyword})},g=function(e){return o("/note/delete",{itemCheckedIds:e.itemCheckedIds},"POST")},m=function(){return o("/note/getcategory")},p=function(e){return o("/note/movecategory",{itemCheckedIds:e.itemCheckedIds,category:e.category},"POST")}},531:function(e,t,n){},532:function(e,t,n){},539:function(e,t,n){"use strict";n.r(t);n(97);var r=n(98),a=n.n(r),o=(n(56),n(57)),i=n.n(o),c=n(99),s=n.n(c),d=(n(156),n(158)),u=n.n(d),l=n(100),f=n(14),h=n(15),g=n(17),m=n(16),p=n(0),y=n.n(p),S=n(210),k=[{value:"Bold",style:"BOLD",icon:"icon-bold"},{value:"Italic",style:"ITALIC",icon:"icon-icon_italic"},{value:"Underline",style:"UNDERLINE",icon:"icon-under-line"},{value:"Strikethrough",style:"STRIKETHROUGH",icon:"icon-strike-through"},{value:"Code",style:"CODE",icon:"icon-code"},{value:"Highlight",style:"HIGHLIGHT",icon:"icon-highlight"}],v=[{value:"Heading One",block:"header-one",icon:"icon-h2"},{value:"Heading Two",block:"header-two",icon:"icon-h4"},{value:"Blockquote",block:"blockquote",icon:"icon-blockquote"},{value:"Unordered List",block:"unordered-list-item",icon:"icon-e-unorder-list"},{value:"Ordered List",block:"ordered-list-item",icon:"icon-e-order-list"}];n(531);var C=function(e){var t=e.editorState,n=e.updateEditorState,r=function(e){e.preventDefault();var r=e.currentTarget.getAttribute("data-style");n(S.RichUtils.toggleInlineStyle(t,r))},a=function(e){e.preventDefault();var r=e.currentTarget.getAttribute("data-block");n(S.RichUtils.toggleBlockType(t,r))};return y.a.createElement("div",{className:"toolbar"},k.map((function(e){return function(e,n,a){var o="";return t.getCurrentInlineStyle().has(n)&&(o="active"),y.a.createElement("div",{key:n,className:"icon-container ".concat(o),"data-style":n,onMouseDown:r},a?y.a.createElement("i",{className:"iconfont ".concat(a)}):e)}(e.value,e.style,e.icon)})),v.map((function(e){return function(e,n,r){var o="";return S.RichUtils.getCurrentBlockType(t)===n&&(o="active"),y.a.createElement("span",{key:n,className:"icon-container ".concat(o),"data-block":n,onMouseDown:a},r?y.a.createElement("i",{className:"iconfont ".concat(r)}):e)}(e.value,e.block,e.icon)})))},b=n(59),E=n(53);n(532);function w(e){return S.KeyBindingUtil.hasCommandModifier(e)&&88===e.keyCode?"strikethrough":S.KeyBindingUtil.hasCommandModifier(e)&&72===e.keyCode?"highlight":S.KeyBindingUtil.hasCommandModifier(e)&&219===e.keyCode?"header-one":S.KeyBindingUtil.hasCommandModifier(e)&&221===e.keyCode?"header-two":S.KeyBindingUtil.hasCommandModifier(e)&&55===e.keyCode?"blockquote":S.KeyBindingUtil.hasCommandModifier(e)&&56===e.keyCode?"unordered-list":S.KeyBindingUtil.hasCommandModifier(e)&&57===e.keyCode?"ordered-list":Object(S.getDefaultKeyBinding)(e)}var T=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).onChange=function(e){r.setState({editorState:e})},r.save=Object(l.a)(s.a.mark((function e(){var t,n,a,o,i,c,d,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.editorState,a=t.resNoteId,o=r.props.match.params.id,i=r.props.match.params.category,c=n.getCurrentContent(),d=Object(S.convertToRaw)(c),!d.blocks.every((function(e){return""===e.text.trim()}))){e.next=8;break}return e.abrupt("return",u.a.info("empty !!!",1));case 8:if("add"!==o){e.next=21;break}if("\u5168\u90e8\u5206\u7c7b"===i&&(i="\u672a\u5206\u7c7b"),a){e.next=20;break}return e.next=13,Object(E.a)({rawContentState:JSON.stringify(d),category:i});case 13:if(0!==(l=e.sent).data.err){e.next=17;break}return r.setState({resNoteId:l.data.data}),e.abrupt("return",u.a.success("\u6dfb\u52a0\u6210\u529f",1,(function(){}),!1));case 17:return e.abrupt("return");case 20:o=a;case 21:return e.next=23,Object(E.k)({_id:o,rawContentState:JSON.stringify(d)});case 23:if(0!==e.sent.data.err){e.next=26;break}return e.abrupt("return",u.a.success("\u66f4\u65b0\u6210\u529f",1));case 26:u.a.fail("\u4fdd\u5b58\u5931\u8d25",1);case 27:case"end":return e.stop()}}),e)}))),r.updateEditorState=function(e){return r.setState({editorState:e})},r.handleKeyCommand=function(e){var t=S.RichUtils.handleKeyCommand(r.state.editorState,e);return t||"strikethrough"!==e||(t=S.RichUtils.toggleInlineStyle(r.state.editorState,"STRIKETHROUGH")),t||"header-one"!==e||(t=S.RichUtils.toggleBlockType(r.state.editorState,"header-one")),t||"header-two"!==e||(t=S.RichUtils.toggleBlockType(r.state.editorState,"header-two")),t||"blockquote"!==e||(t=S.RichUtils.toggleBlockType(r.state.editorState,"blockquote")),t||"ordered-list"!==e||(t=S.RichUtils.toggleBlockType(r.state.editorState,"ordered-list-item")),t||"unordered-list"!==e||(t=S.RichUtils.toggleBlockType(r.state.editorState,"unordered-list-item")),t||"highlight"!==e||(t=S.RichUtils.toggleInlineStyle(r.state.editorState,"HIGHLIGHT")),t?(r.setState({editorState:t}),"handled"):"not-handled"},r.undo=function(){r.setState({editorState:S.EditorState.undo(r.state.editorState)})},r.redo=function(){r.setState({editorState:S.EditorState.redo(r.state.editorState)})},r.focus=function(){if("true"!==document.activeElement.contentEditable){var e=function(e){var t=e.getCurrentContent().getBlockMap(),n=t.last().getKey(),r=t.last().getLength(),a=new S.SelectionState({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r});return S.EditorState.acceptSelection(e,a)}(r.state.editorState);r.setState({editorState:e},(function(){r.domEditor.focus()}))}},r.setDomEditorRef=function(e){return r.domEditor=e},r.state={editorState:S.EditorState.createEmpty(),updateTime:r.props.location.state,isLoading:!0,resNoteId:""},r}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==(t=this.props.match.params.id)){e.next=3;break}return e.abrupt("return",this.setState({isLoading:!1}));case 3:return e.next=5,Object(E.e)({_id:t});case 5:0===(n=e.sent).data.err?(r=JSON.parse(n.data.data),this.setState({editorState:S.EditorState.createWithContent(Object(S.convertFromRaw)(r)),isLoading:!1})):this.props.history.replace("/404");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"appendContent",value:function(e,t){var n=this,r=this.state.editorState,a=r.getSelection(),o=r.getCurrentContent(),i=null;i=a.getEndOffset()===a.getStartOffset()?S.Modifier.insertText(o,a,e):S.Modifier.replaceText(o,a,e);var c=S.EditorState.push(r,i,t);this.onChange(c),setTimeout((function(){n.focus()}),0)}},{key:"handleKeyEvent",value:function(e){9===e.keyCode&&(e.preventDefault(),this.appendContent("\t","insert-characters"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.editorState,r=t.updateTime,o=t.isLoading,c=n.getCurrentContent(),s=!1;c.hasText()||"unstyled"===c.getBlockMap().first().getType()&&(s=!0);var d="",u="";return 0===n.getUndoStack().size&&(d="grey"),0===n.getRedoStack().size&&(u="grey"),o?y.a.createElement("div",{style:{textAlign:"center",marginTop:100,color:"#777"}},"Loading..."):y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"editor-header"},y.a.createElement(a.a,{mode:"light",icon:y.a.createElement(i.a,{type:"left",size:"md"}),onLeftClick:function(){e.props.history.push({pathname:"/",category:e.props.match.params.category})},rightContent:[y.a.createElement("span",{key:"0",className:"iconfont icon-chehui ".concat(d),onClick:this.undo,style:{marginRight:20}}),y.a.createElement("span",{key:"1",className:"iconfont icon-qianjin ".concat(u),onClick:this.redo,style:{marginRight:20}}),y.a.createElement("span",{key:"2",className:"iconfont icon-dui",onClick:this.save})]},y.a.createElement("span",{className:"edit-time"},Object(b.a)(r))),y.a.createElement(C,{editorState:n,updateEditorState:this.updateEditorState})),y.a.createElement("div",{className:"editor-wrapper ".concat(s?"":"hide-placeholder")},y.a.createElement("div",{className:"editor-container",onClick:this.focus,onKeyDown:this.handleKeyEvent.bind(this)},y.a.createElement(S.Editor,{customStyleMap:{HIGHLIGHT:{backgroundColor:"#faed27"}},editorState:n,onChange:function(t){return e.onChange(t)},placeholder:"write your note in ...",handleKeyCommand:this.handleKeyCommand,keyBindingFn:w,ref:this.setDomEditorRef}))))}}]),n}(p.Component);t.default=T},59:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return/^([a-zA-Z]|[0-9])(\w|-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)},a=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),o=t.getHours(),i=t.getMinutes();return o<10&&(o="0"+o),i<10&&(i="0"+i),n+"\u5e74"+r+"\u6708"+a+"\u65e5 "+o+":"+i}}}]);
//# sourceMappingURL=13.6370dbd1.chunk.js.map